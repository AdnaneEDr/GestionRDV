<?xml version="1.0" encoding="utf-8"?>
<androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/background_secondary">

    <!-- Toolbar -->
    <com.google.android.material.appbar.AppBarLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/gradient_background">

        <com.google.android.material.appbar.MaterialToolbar
            android:id="@+id/toolbar"
            android:layout_width="match_parent"
            android:layout_height="?attr/actionBarSize"
            app:title="Dossier patient"
            app:titleTextColor="@color/text_white"
            app:navigationIcon="@drawable/ic_back"
            app:navigationIconTint="@color/text_white" />

    </com.google.android.material.appbar.AppBarLayout>

    <androidx.core.widget.NestedScrollView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        app:layout_behavior="@string/appbar_scrolling_view_behavior">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:padding="16dp">

            <!-- Patient Info Card -->
            <androidx.cardview.widget.CardView
                style="@style/CardStyle"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="16dp">

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal"
                    android:padding="16dp"
                    android:gravity="center_vertical">

                    <androidx.cardview.widget.CardView
                        android:layout_width="70dp"
                        android:layout_height="70dp"
                        app:cardCornerRadius="35dp"
                        app:cardElevation="4dp">

                        <ImageView
                            android:id="@+id/patientAvatar"
                            android:layout_width="match_parent"
                            android:layout_height="match_parent"
                            android:src="@drawable/ic_person"
                            android:scaleType="centerCrop"
                            android:contentDescription="Patient" />

                    </androidx.cardview.widget.CardView>

                    <LinearLayout
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:orientation="vertical"
                        android:layout_marginStart="16dp">

                        <TextView
                            android:id="@+id/patientName"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Mohammed Alami"
                            style="@style/TextHeading3"
                            android:layout_marginBottom="4dp" />

                        <TextView
                            android:id="@+id/patientAge"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="34 ans"
                            style="@style/TextBody2"
                            android:layout_marginBottom="4dp" />

                        <TextView
                            android:id="@+id/patientPhone"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="+212 6 12 34 56 78"
                            style="@style/TextCaption" />

                    </LinearLayout>

                </LinearLayout>

            </androidx.cardview.widget.CardView>

            <!-- Current Appointment Card -->
            <androidx.cardview.widget.CardView
                style="@style/CardStyle"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="16dp">

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:padding="16dp">

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Rendez-vous actuel"
                        style="@style/TextCaption"
                        android:layout_marginBottom="12dp" />

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="horizontal"
                        android:layout_marginBottom="8dp">

                        <ImageView
                            android:layout_width="20dp"
                            android:layout_height="20dp"
                            android:src="@drawable/ic_calendar"
                            android:tint="@color/primary_medium"
                            android:layout_marginEnd="12dp"
                            android:contentDescription="Date" />

                        <TextView
                            android:id="@+id/appointmentDate"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Aujourd'hui, 10:30"
                            style="@style/TextBody1" />

                    </LinearLayout>

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="horizontal">

                        <ImageView
                            android:layout_width="20dp"
                            android:layout_height="20dp"
                            android:src="@drawable/ic_note"
                            android:tint="@color/primary_medium"
                            android:layout_marginEnd="12dp"
                            android:contentDescription="Reason" />

                        <TextView
                            android:id="@+id/appointmentReason"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Consultation générale"
                            style="@style/TextBody1" />

                    </LinearLayout>

                </LinearLayout>

            </androidx.cardview.widget.CardView>

            <!-- Medical History -->
            <androidx.cardview.widget.CardView
                style="@style/CardStyle"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="16dp">

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:padding="16dp">

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Informations médicales"
                        style="@style/TextHeading3"
                        android:layout_marginBottom="16dp" />

                    <!-- Allergies -->
                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Allergies"
                        style="@style/TextCaption"
                        android:layout_marginBottom="8dp" />

                    <TextView
                        android:id="@+id/allergiesText"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Aucune allergie connue"
                        style="@style/TextBody2"
                        android:layout_marginBottom="16dp" />

                    <!-- Current Treatments -->
                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Traitements en cours"
                        style="@style/TextCaption"
                        android:layout_marginBottom="8dp" />

                    <TextView
                        android:id="@+id/treatmentsText"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Aucun traitement"
                        style="@style/TextBody2" />

                </LinearLayout>

            </androidx.cardview.widget.CardView>

            <!-- Consultation History -->
            <androidx.cardview.widget.CardView
                style="@style/CardStyle"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="16dp">

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:padding="16dp">

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Historique des consultations"
                        style="@style/TextHeading3"
                        android:layout_marginBottom="16dp" />

                    <androidx.recyclerview.widget.RecyclerView
                        android:id="@+id/historyRecycler"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:nestedScrollingEnabled="false" />

                </LinearLayout>

            </androidx.cardview.widget.CardView>

            <!-- Notes Section -->
            <androidx.cardview.widget.CardView
                style="@style/CardStyle"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="16dp">

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:padding="16dp">

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Notes de consultation"
                        style="@style/TextHeading3"
                        android:layout_marginBottom="16dp" />

                    <com.google.android.material.textfield.TextInputLayout
                        android:id="@+id/notesInputLayout"
                        style="@style/InputField"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:hint="Ajouter des notes">

                        <com.google.android.material.textfield.TextInputEditText
                            android:id="@+id/notesInput"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:inputType="textMultiLine"
                            android:minLines="4"
                            android:maxLines="8"
                            android:gravity="top"
                            android:textSize="16sp"
                            android:textColor="@android:color/black"
                            android:padding="16dp" />

                    </com.google.android.material.textfield.TextInputLayout>

                </LinearLayout>

            </androidx.cardview.widget.CardView>

            <!-- Action Buttons -->
            <com.google.android.material.button.MaterialButton
                android:id="@+id/saveNotesButton"
                style="@style/ButtonPrimary"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="Enregistrer les notes"
                android:layout_marginBottom="24dp" />

        </LinearLayout>

    </androidx.core.widget.NestedScrollView>

</androidx.coordinatorlayout.widget.CoordinatorLayout>
